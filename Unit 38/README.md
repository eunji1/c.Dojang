# Unit 38. ν¬μΈν„°μ™€ λ°°μ—΄ μ‘μ©ν•κΈ°

## 38.1 ν¬μΈν„°μ— ν• λ‹Ήλ λ©”λ¨λ¦¬λ¥Ό λ°°μ—΄μ²λΌ μ‚¬μ©ν•κΈ°
ν¬μΈν„°λ¥Ό λ°°μ—΄μ²λΌ μ‚¬μ©ν•λ” λ°©λ²•
- μλ£ν• *ν¬μΈν„°μ΄λ¦„ = malloc(sizeof(μλ£ν•) * ν¬κΈ°);
```c
#include <stdio.h>
#include <stdlib.h>    // malloc, free ν•¨μκ°€ μ„ μ–Έλ ν—¤λ” νμΌ

int main()
{
    int *numPtr = malloc(sizeof(int) * 10);    // int 10κ° ν¬κΈ°λ§νΌ λ™μ  λ©”λ¨λ¦¬ ν• λ‹Ή

    numPtr[0] = 10;    // λ°°μ—΄μ²λΌ μΈλ±μ¤λ΅ μ ‘κ·Όν•μ—¬ κ°’ ν• λ‹Ή
    numPtr[9] = 20;    // λ°°μ—΄μ²λΌ μΈλ±μ¤λ΅ μ ‘κ·Όν•μ—¬ κ°’ ν• λ‹Ή

    printf("%d\n", numPtr[0]);    // λ°°μ—΄μ²λΌ μΈλ±μ¤λ΅ μ ‘κ·Όν•μ—¬ κ°’ μ¶λ ¥
    printf("%d\n", numPtr[9]);    // λ°°μ—΄μ²λΌ μΈλ±μ¤λ΅ μ ‘κ·Όν•μ—¬ κ°’ μ¶λ ¥

    free(numPtr);    // λ™μ μΌλ΅ ν• λ‹Ήν• λ©”λ¨λ¦¬ ν•΄μ 

    return 0;
}
```
λ°°μ—΄μ²λΌ [ ] μ•μ— μΈλ±μ¤λ¥Ό μ§€μ •ν•μ—¬ κ°’μ„ ν• λ‹Ήν•κ±°λ‚ κ°€μ Έμ¬ μ μμ
- ν¬μΈν„°[μΈλ±μ¤]



<details>
<summary>[κ·Έλ¦Ό 38-1] ν¬μΈν„°λ¥Ό λ°°μ—΄μ²λΌ μ‚¬μ©
</summary>
<div markdown="1">       

π

![](https://dojang.io/pluginfile.php/381/mod_page/content/23/unit38-1.png)

</div>
</details>

## 38.3 ν¬μΈν„°μ— ν• λ‹Ήλ λ©”λ¨λ¦¬λ¥Ό 2μ°¨μ› λ°°μ—΄μ²λΌ μ‚¬μ©ν•κΈ°
- ```μλ£ν• **ν¬μΈν„°μ΄λ¦„ = malloc(sizeof(μλ£ν• *)* μ„Έλ΅ν¬κΈ°);``` μ™€ κ°™μ΄ μ„Έλ΅ κ³µκ°„ λ©”λ¨λ¦¬ ν• λ‹Ή
    - λ°λ³µλ¬ΈμΌλ΅ λ°λ³µν•λ©΄μ„ **ν¬μΈν„°[i] = malloc(sizeof(μλ£ν•) * κ°€λ΅ν¬κΈ°);** μ™€ κ°™μ΄ κ°€λ΅ κ³µκ°„ λ©”λ¨λ¦¬ ν• λ‹Ή
    - λ°λ³µλ¬ΈμΌλ΅ λ°λ³µν•λ©΄μ„ **free(ν¬μΈν„°[i]);** μ™€ κ°™μ΄ κ°€λ΅ κ³µκ°„ λ©”λ¨λ¦¬ ν•΄μ 
    - **free(ν¬μΈν„°);** μ™€ κ°™μ΄ μ„Έλ΅ κ³µκ°„ λ©”λ¨λ¦¬ ν•΄μ 
```c
#include <stdio.h>
#include <stdlib.h>    // malloc, free ν•¨μκ°€ μ„ μ–Έλ ν—¤λ” νμΌ

int main()
{
    int **m = malloc(sizeof(int *) * 3);   // μ΄μ¤‘ ν¬μΈν„°μ— (int ν¬μΈν„° ν¬κΈ° * μ„Έλ΅ ν¬κΈ°)λ§νΌ
                                           // λ™μ  λ©”λ¨λ¦¬ ν• λ‹Ή. λ°°μ—΄μ μ„Έλ΅

    for (int i = 0; i < 3; i++)            // μ„Έλ΅ ν¬κΈ°λ§νΌ λ°λ³µ
    {
        m[i] = malloc(sizeof(int) * 4);    // (int ν¬κΈ° * κ°€λ΅ ν¬κΈ°)λ§νΌ λ™μ  λ©”λ¨λ¦¬ ν• λ‹Ή.
                                           // λ°°μ—΄μ κ°€λ΅
    }

    m[0][0] = 1;    // μ„Έλ΅ μΈλ±μ¤ 0, κ°€λ΅ μΈλ±μ¤ 0μΈ μ”μ†μ— κ°’ ν• λ‹Ή
    m[2][0] = 5;    // μ„Έλ΅ μΈλ±μ¤ 2, κ°€λ΅ μΈλ±μ¤ 0μΈ μ”μ†μ— κ°’ ν• λ‹Ή
    m[2][3] = 2;    // μ„Έλ΅ μΈλ±μ¤ 2, κ°€λ΅ μΈλ±μ¤ 3μΈ μ”μ†μ— κ°’ ν• λ‹Ή

    printf("%d\n", m[0][0]);    // 1: μ„Έλ΅ μΈλ±μ¤ 0, κ°€λ΅ μΈλ±μ¤ 0μΈ μ”μ†μ κ°’ μ¶λ ¥
    printf("%d\n", m[2][0]);    // 5: μ„Έλ΅ μΈλ±μ¤ 2, κ°€λ΅ μΈλ±μ¤ 0μΈ μ”μ†μ κ°’ μ¶λ ¥
    printf("%d\n", m[2][3]);    // 2: μ„Έλ΅ μΈλ±μ¤ 2, κ°€λ΅ μΈλ±μ¤ 3μΈ μ”μ†μ κ°’ μ¶λ ¥

    for (int i = 0; i < 3; i++)    // μ„Έλ΅ ν¬κΈ°λ§νΌ λ°λ³µ
    {
        free(m[i]);                // 2μ°¨μ› λ°°μ—΄μ κ°€λ΅ κ³µκ°„ λ©”λ¨λ¦¬ ν•΄μ 
    }

    free(m);    // 2μ°¨μ› λ°°μ—΄μ μ„Έλ΅ κ³µκ°„ λ©”λ¨λ¦¬ ν•΄μ 

    return 0;
}
```

```
int **m = malloc(sizeof(int *) * 3);    // μ΄μ¤‘ ν¬μΈν„°μ— (int ν¬μΈν„° ν¬κΈ° * μ„Έλ΅ ν¬κΈ°)λ§νΌ
                                        // λ©”λ¨λ¦¬ ν• λ‹Ή. λ°°μ—΄μ μ„Έλ΅
```

μ΄μ¤‘ ν¬μΈν„°μ— 2μ°¨μ› λ°°μ—΄μ μ„Έλ΅ κ³µκ°„μ— ν•΄λ‹Ήν•λ” λ©”λ¨λ¦¬λ¥Ό ν• λ‹Ήν•λ” λ¨μµμ„ κ·Έλ¦ΌμΌλ΅ ν‘ν„ν•λ©΄ λ‹¤μκ³Ό κ°™λ‹¤

<details>
<summary>[κ·Έλ¦Ό 38-2] μ΄μ¤‘ ν¬μΈν„°μ— λ°°μ—΄μ μ„Έλ΅ κ³µκ°„ ν• λ‹Ή
</summary>
<div markdown="1">       

π

![](https://dojang.io/pluginfile.php/383/mod_page/content/22/unit38-2.png)

</div>
</details>

μ΄μ  μ„Έλ΅ ν¬κΈ°λ§νΌ λ°λ³µν•λ©΄μ„ 2μ°¨μ› λ°°μ—΄μ κ°€λ΅ κ³µκ°„μ— ν•΄λ‹Ήν•λ” λ©”λ¨λ¦¬λ¥Ό ν• λ‹Ήν•©λ‹λ‹¤. κ°€λ΅ κ³µκ°„μ—λ” intν• μ«μκ°€ λ“¤μ–΄κ° κ²ƒμ΄λ―€λ΅ sizeof(int)μ— κ°€λ΅ ν¬κΈ° 4λ¥Ό κ³±ν•΄μ¤λ‹λ‹¤.
```
for (int i = 0; i < 3; i++)            // μ„Έλ΅ ν¬κΈ°λ§νΌ λ°λ³µ
{
    m[i] = malloc(sizeof(int) * 4);    // (int ν¬κΈ° * κ°€λ΅ ν¬κΈ°)λ§νΌ λ™μ  λ©”λ¨λ¦¬ ν• λ‹Ή.
                                       // λ°°μ—΄μ κ°€λ΅
}
```
μ΄μ¤‘ ν¬μΈν„°μ— 2μ°¨μ› λ°°μ—΄μ κ°€λ΅ κ³µκ°„μ— ν•΄λ‹Ήν•λ” λ©”λ¨λ¦¬λ¥Ό ν• λ‹Ήν•λ” λ¨μµμ„ κ·Έλ¦ΌμΌλ΅ ν‘ν„ν•λ©΄ λ‹¤μκ³Ό κ°™λ‹¤

<details>
<summary>[κ·Έλ¦Ό 38-3] μ΄μ¤‘ ν¬μΈν„°μ— λ°°μ—΄μ κ°€λ΅ κ³µκ°„ ν• λ‹Ή
</summary>
<div markdown="1">       

π

![](https://dojang.io/pluginfile.php/383/mod_page/content/22/unit38-3.png)

</div>
</details>

```
for (int i = 0; i < 3; i++)    // μ„Έλ΅ ν¬κΈ°λ§νΌ λ°λ³µ
{
    free(m[i]);                // 2μ°¨μ› λ°°μ—΄μ κ°€λ΅ κ³µκ°„ λ©”λ¨λ¦¬ ν•΄μ 
}

free(m);    // 2μ°¨μ› λ°°μ—΄μ μ„Έλ΅ κ³µκ°„ λ©”λ¨λ¦¬ ν•΄μ 
```

λ©”λ¨λ¦¬λ¥Ό ν• λ‹Ήν•  λ• μ„Έλ΅ β†’ κ°€λ΅ μμ„λ΅ ν• λ‹Ήν–μΌλ―€λ΅ ν•΄μ ν•  λ•λ” λ°λ€λ΅ κ°€λ΅ β†’ μ„Έλ΅ μμ„λ΅ ν•΄μ ν•©λ‹λ‹¤.